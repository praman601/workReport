@model IPagedList<workReport.Models.workList>

@using PagedList.Mvc;
@using PagedList;

<h2></h2>
@{
    var StartDatee = @ViewBag.StartDatee;
    var EndDatee = @ViewBag.EndDatee;
   // var PageNume = @ViewBag.PageNume;
}

@*@{Html.RenderPartial("~/Views/Shared/_PartialSearch.cshtml")}
*@

@using (Html.BeginForm("RangeList", "workLists"))
{

    @*<div class="form-group" id="formcontainer">*@

    <div class="row">

        <div class="col-md-3">
            @Html.Editor("StartDatee", new
       {
           htmlAttributes = new
           {
               @class = "form-control "@*, @Value = @DateTime.Now.ToShortDateString()*@}
})
        </div>
        <div class="col-md-3">
            @Html.Editor("EndDatee", new
       {
           htmlAttributes = new
           {
               @class = "form-control "@*, @Value = @DateTime.Now.ToShortDateString()*@}
})
        </div>

        <div class="col-md-3">
            <input type="submit" class="btn  btn-primary btn-block" value="submit" @*"Search" onclick="return searchWork()"*@>
        </div>


    </div>
    @*</div>*@
}
<br />
<div id="List_Container">
    <table class="table">
        <tr>
            <th>
                SN
            </th>

            <th>
                Type
            </th>
            <th>
                Issue
            </th>

            <th>
                Municipality
            </th>

            <th>
                Time
            </th>
            <th>Date</th>
            <th></th>
        </tr>
       
        @{
            int rowNo = 0;
            if (@ViewBag.PageNume > 1)
            {
                rowNo = (@ViewBag.PageNume - 1) * 10 + rowNo;
            }
        }

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @(rowNo += 1)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.workListType)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.issue)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.mun)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.time)
                </td>
                <td>@Html.DisplayFor(ModelItem => item.date)</td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.workListId }) |
                    @Html.ActionLink("Details", "Details", new { id = item.workListId }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.workListId })
                </td>
            </tr>
        }

    </table>
    @Html.PagedListPager(Model, i => Url.Action("RangeList", "workLists", new { @ViewBag.StartDatee, @ViewBag.EndDatee, i }))


</div>
<script src="~/Scripts/jquery-3.4.1.min.js"></script>

@section scripts {

    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
    @*<script>

            $(document).ready(function () {
                debugger;
                $('#startDate').datepicker({ dateFormat: 'yy-mm-dd' }).datepicker("setDate", new Date());
            });

            $(document).ready(function () {
                debugger;
                $('#endDate').datepicker({ dateFormat: 'yy-mm-dd' }).datepicker("setDate", new Date());
            });
        </script>*@
    <script>

        $(document).ready(function () {
            debugger;
            $('#StartDatee').datepicker({ dateFormat: 'yy-mm-dd' }).datepicker("setDate", StartDatee);
        });

        $(document).ready(function () {
            debugger;
            $('#EndDatee').datepicker({ dateFormat: 'yy-mm-dd' }).datepicker("setDate", EndDatee);
        });
        $(document).ready(function () {
            debugger;
            $('#formcontainer').html('');
        });
    </script>
    <script>



    function searchWork() {

        debugger;


        var userId = '@Session["userId"]';
        var startDate = $('#startDate').val();
        var endDate = $('#endDate').val();

        {

            $.ajax({
                url: '/workLists/RangeList1',
                //type: "post",
                //dataType: "JSON",
                // async: true,
                method: "post",
                type: "application/json",

                data: {
                    startDate: startDate,
                    endDate: endDate

                }
                ,
                success: function (result) {
                    debugger;



                    $('#formContainer').html('');
                    $('#List_Container').html(result);
                    $("#work_Types").val('');
                    $("#issue_Types").val('');
                    $("#mun").val('');
                    $("#Time").val('');
                    $("#workDate").val();

                }
                , error: function (result) {
                    debugger;

                    alert("something went wrongsss!!");
                }


            });
        }
    }

    </script>
    @*<script>
            $(document).ready(function () {
                debugger;
                alert("1");
                var x = $("#StartDatee").val();
                var y = $("#EndDatee").val();
                var z = $("#PageNume").val();
                $.ajax({
                    url: '/workLists/RangeList1',

                    method: "post",
                    type: "application/json",

                    data: {
                        startDate: x,
                        endDate: y,
                        i: z,
                    },
                    success: function (result) {
                        debugger;



                        $('#List_Container').html(result);
                        $("#work_Types").val('');
                        $("#issue_Types").val('');
                        $("#mun").val('');
                        $("#Time").val('');
                        $("#workDate").val();

                    }
                    , error: function (result) {
                        debugger;

                        alert("something went wrongsss!!");
                    }


                });


            });
        </script>*@
}

